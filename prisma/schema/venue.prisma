model Venue {
  id String @id @default(uuid())

  name          String
  googlePlaceId String? @unique // Google Places API place_id for deduplication
  catgegory   String
  subcategory String

  location  String
  latitude  Float
  longitude Float

  startTime  String?
  endTime    String?

  description String?

  imageId  String?       @unique
  imageUrl String?
  image    FileInstance? @relation(fields: [imageId], references: [id], onDelete: SetNull)

  votes Votes[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("venues")
}

model Votes {
  id String @id @default(uuid())

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  venueId String
  venue   Venue  @relation(fields: [venueId], references: [id], onDelete: Cascade)

  isOpen Boolean

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@index([venueId, createdAt(sort: Desc)])
  @@index([userId, venueId, createdAt(sort: Desc)])
  @@map("votes")
}

